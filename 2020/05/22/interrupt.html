<!DOCTYPE HTML>
<!--
	Editorial by HTML5 UP
	html5up.net | @ajlkn
	Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
-->
<html>
	<head>
		



		<title>Interrupt of ARM A7</title>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
		<link rel="stylesheet" href="../../../../assets/css/main.css" />
		<link rel="stylesheet" href="../../../../assets/css/syntax.css">
	</head>
	<body class="is-preload">

		<!-- Wrapper -->
			<div id="wrapper">

				<!-- Main -->
					<div id="main">
						<div class="inner">

							<!-- Header -->
																  <script type="text/x-mathjax-config">
								    MathJax.Hub.Config({
								      tex2jax: {
								        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre'],
								        inlineMath: [['$','$']]
								      }
								    });
								  </script>
								  <script src='https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-MML-AM_CHTML' async></script>


								<header id="header">
									<link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">
									<a href="../../../../index.html" class="logo"><strong>Follow Jietang</strong> with:</a>
									<ul class="icons">
										<li><a href="mailto:alvin.tang6@gmail.com" class="icon solid fa-envelope"><span class="label">Email</span></a></li>
										
										<!--<li><a href="#" class="icon brands fa-twitter"><span class="label">Twitter</span></a></li> -->
										<li><a href="https://github.com/Alvintang6" class="icon brands fa-github-square"><span class="label">Github</span></a></li>
										<li><a href="https://www.instagram.com/tang12y/?hl=en" class="icon brands fa-instagram"><span class="label">Instagram</span></a></li>
										<li><a href="https://www.linkedin.com/in/jie-tang-55070b148/" class="icon brands fa-linkedin-in"><span class="label">Linkedin</span></a></li>
										<li><a href="../../../../resume_jietang.pdf" class="logo"><i class="fas fa-file-invoice"></i>CV</a></li>
									</ul>
								</header>


							


								

							<!-- Content -->
								<section>
									<header class="main">
										<h1>Interrupt of ARM A7</h1>
										<p>22 May 2020</p>
									</header>
									 
									


									<h3><i class="fas fa-tags"></i>Post Tags</h3>
									
									<a href=" ../../../../tag/arm/index.html" >ARM</a>
									
									<a href=" ../../../../tag/interrupt/index.html" >interrupt</a>
									
									<a href=" ../../../../tag/bare-metal/index.html" >bare-metal</a>
									
									<br/>
									<br/>

									<ul id="markdown-toc">
  <li><a href="#中断程序逻辑" id="markdown-toc-中断程序逻辑">中断程序逻辑</a></li>
  <li><a href="#gic-中断控制器" id="markdown-toc-gic-中断控制器">GIC 中断控制器</a></li>
  <li><a href="#section" id="markdown-toc-section">1. 中断向量表以及复位中断初始化</a></li>
  <li><a href="#main" id="markdown-toc-main">2. main主函数初始化</a>    <ul>
      <li><a href="#section-1" id="markdown-toc-section-1">2.1 函数初始化中断引角</a></li>
      <li><a href="#irq" id="markdown-toc-irq">2.2 向irq中断表中注册中断函数</a></li>
    </ul>
  </li>
  <li><a href="#irq-1" id="markdown-toc-irq-1">3.1 汇编定义irq中断</a></li>
  <li><a href="#section-2" id="markdown-toc-section-2">附录</a>    <ul>
      <li><a href="#attributeweak" id="markdown-toc-attributeweak"><strong>attribute</strong>((weak))</a></li>
      <li><a href="#typedef-" id="markdown-toc-typedef-">typedef 函数指针</a></li>
    </ul>
  </li>
</ul>

<h3 id="中断程序逻辑">中断程序逻辑</h3>

<pre><code class="language-C">1. 在汇编start程序中初始化中断向量表，定义复位中断 Reset_handler初始化系统，在复位中断的最后跳转入C语言main函数。
2. main函数中初始化中断引角(在irq_table中注册中断函数, 设置并使能该引角中断)，初始其他外设并执行程序大循环。
3. 定义其他中断(如irq中断)，在irq中断中跳转至irq中断处理C语言函数SystemIrqHandler
4. irq中断处理函数中会调用已经注册的中断函数irqTable[intNum].irqHandler();
5. 程序中断返回后会回到主函数main中继续执行
</code></pre>

<p>一般情况下在汇编中初始化中断向量表，定义不同的中断函数的操作都是相同的。不同场景下主要需要修改的是中断处理函数和主函数中中断引角和外设的初始化。</p>

<h3 id="gic-中断控制器">GIC 中断控制器</h3>

<p>GIC general interrupt controller</p>

<p>关于GIC有两组寄存器GICD(GIC分发器)和GICC(CPU接口寄存器)，
分发器(distributor)用于管理CPU所有中断源，确定每个中断的优先级，管理中断的屏蔽和中断抢占。最终将优先级最高的中断转发到一个或者多个CPU接口</p>

<p>GIC 的基地址保存在CP15协处理器中
对于cp15协处理器中的数据需要使用mrc指令进行读取。<br />
<b>mrc {cond} p15, &lt;Opcode_1&gt;, &lt;Rd&gt;, &lt;CRn&gt;, &lt;CRm&gt;, &lt;Opcode_2&gt;  </b></p>

<p>其中GIC的基地址在c15 4 c0中
GICC相对于GIC偏移了0x2000, GICC_IAR寄存器相对于GICC的基地址又偏移了0xC</p>
<div align="center">
  <p><img width="60%" height="60%" src="/blog_photos/MPU/GIC_offset.png" />&lt;p&gt;GIC_offset&lt;/p&gt;&lt;/div&gt;</p>

  <table>
    <thead>
      <tr>
        <th>地址偏移</th>
        <th>寄存器名字</th>
        <th>类型</th>
        <th>复位值</th>
        <th>寄存器描述</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td>0x000C</td>
        <td>GICC_IAR</td>
        <td>RO</td>
        <td>0x000003FF</td>
        <td>中断确认寄存器</td>
      </tr>
    </tbody>
  </table>

  <p>GICC_IAR : 中断确认寄存器 Interrupt acknowledge register [31:13]:reserved, [12:10]:CPUID, [9:0]:interrupt ID。
中断id用于和xx表匹配相应的中断函数。</p>

  <h3 id="section">1. 中断向量表以及复位中断初始化</h3>

  <div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="p">.</span><span class="n">text</span>
<span class="p">.</span><span class="n">align</span> <span class="mi">2</span>         <span class="c1">//设置字节对齐</span>
<span class="p">.</span><span class="n">global</span> <span class="n">_start</span>
<span class="n">_start</span><span class="o">:</span>

    <span class="n">ldr</span>     <span class="n">pc</span><span class="p">,</span> <span class="o">=</span><span class="n">Reset_Handler</span>           <span class="cm">/* Reset                  */</span>
    <span class="n">ldr</span>     <span class="n">pc</span><span class="p">,</span> <span class="o">=</span><span class="n">Undefined_Handler</span>       <span class="cm">/* Undefined instructions */</span>
    <span class="n">ldr</span>     <span class="n">pc</span><span class="p">,</span> <span class="o">=</span><span class="n">SVC_Handler</span>             <span class="cm">/* Supervisor Call        */</span>
    <span class="n">ldr</span>     <span class="n">pc</span><span class="p">,</span> <span class="o">=</span><span class="n">PrefAbort_Handler</span>       <span class="cm">/* Prefetch abort         */</span>
    <span class="n">ldr</span>     <span class="n">pc</span><span class="p">,</span> <span class="o">=</span><span class="n">DataAbort_Handler</span>       <span class="cm">/* Data abort             */</span>
    <span class="p">.</span><span class="n">word</span>   <span class="mi">0</span>                            <span class="cm">/* RESERVED               */</span>
    <span class="n">ldr</span>     <span class="n">pc</span><span class="p">,</span> <span class="o">=</span><span class="n">IRQ_Handler</span>             <span class="cm">/* IRQ interrupt          */</span>
    <span class="n">ldr</span>     <span class="n">pc</span><span class="p">,</span> <span class="o">=</span><span class="n">FIQ_Handler</span>             <span class="cm">/* FIQ interrupt          */</span>



<span class="cm">/**********************第三部分*********************/</span>
<span class="n">Reset_Handler</span><span class="o">:</span>
    <span class="n">cpsid</span>   <span class="n">i</span>                         <span class="cm">/* 全局关闭中断 */</span>


    <span class="n">mrc</span>     <span class="n">p15</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">r0</span><span class="p">,</span> <span class="n">c1</span><span class="p">,</span> <span class="n">c0</span><span class="p">,</span> <span class="mi">0</span>     <span class="cm">/*读取CP15系统控制寄存器   */</span>
    <span class="n">bic</span>     <span class="n">r0</span><span class="p">,</span>  <span class="n">r0</span><span class="p">,</span> <span class="err">#</span><span class="p">(</span><span class="mh">0x1</span> <span class="o">&lt;&lt;</span> <span class="mi">12</span><span class="p">)</span>     <span class="cm">/*  清除第12位（I位）禁用 I Cache  */</span>
    <span class="n">bic</span>     <span class="n">r0</span><span class="p">,</span>  <span class="n">r0</span><span class="p">,</span> <span class="err">#</span><span class="p">(</span><span class="mh">0x1</span> <span class="o">&lt;&lt;</span>  <span class="mi">2</span><span class="p">)</span>     <span class="cm">/*  清除第 2位（C位）禁用 D Cache  */</span>
    <span class="n">bic</span>     <span class="n">r0</span><span class="p">,</span>  <span class="n">r0</span><span class="p">,</span> <span class="err">#</span><span class="mh">0x2</span>             <span class="cm">/*  清除第 1位（A位）禁止严格对齐   */</span>
    <span class="n">bic</span>     <span class="n">r0</span><span class="p">,</span>  <span class="n">r0</span><span class="p">,</span> <span class="err">#</span><span class="p">(</span><span class="mh">0x1</span> <span class="o">&lt;&lt;</span> <span class="mi">11</span><span class="p">)</span>     <span class="cm">/*  清除第11位（Z位）分支预测   */</span>
    <span class="n">bic</span>     <span class="n">r0</span><span class="p">,</span>  <span class="n">r0</span><span class="p">,</span> <span class="err">#</span><span class="mh">0x1</span>             <span class="cm">/*  清除第 0位（M位）禁用 MMU   */</span>
    <span class="n">mcr</span>     <span class="n">p15</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">r0</span><span class="p">,</span> <span class="n">c1</span><span class="p">,</span> <span class="n">c0</span><span class="p">,</span> <span class="mi">0</span>     <span class="cm">/*  将修改后的值写回CP15寄存器   */</span>

<span class="cm">/**********************第四部分*********************/</span>
    <span class="cm">/* 定义IRQ工作模式的栈起始地址 */</span>
    <span class="n">cps</span>     <span class="err">#</span><span class="mh">0x12</span>
    <span class="n">ldr</span>     <span class="n">sp</span><span class="p">,</span> <span class="o">=</span><span class="n">IRQ_model_stack_start</span>

    <span class="cm">/*定义User工作模式的栈起始地址，与Supervisor相同*/</span>
    <span class="n">cps</span>     <span class="err">#</span><span class="mh">0x1F</span>
    <span class="n">ldr</span>     <span class="n">sp</span><span class="p">,</span> <span class="o">=</span><span class="n">SUP_model_stack_start</span>

    <span class="cm">/*定义Supervisor工作模式的栈起始地址，与User相同 */</span>
    <span class="n">cps</span>     <span class="err">#</span><span class="mh">0x13</span>
    <span class="n">ldr</span>     <span class="n">sp</span><span class="p">,</span> <span class="o">=</span><span class="n">SUP_model_stack_start</span>

<span class="cm">/**********************第五部分*******************/</span>
    <span class="cm">/*跳转到系统初始化函数，初始化GIC、CACHE-L1、mmu等等*/</span>
    <span class="n">ldr</span>     <span class="n">r2</span><span class="p">,</span> <span class="o">=</span><span class="n">SystemInit</span>
    <span class="n">blx</span>     <span class="n">r2</span>

 <span class="cm">/*********************第六部分*******************/</span>
    <span class="cm">/*开启全局中断*/</span>
    <span class="n">cpsie</span>   <span class="n">i</span>

    <span class="cm">/*跳转到到 main 函数执行，*/</span>
    <span class="n">b</span> <span class="n">main</span>
    <span class="n">b</span> <span class="p">.</span>        <span class="cm">/*死循环*/</span>
    <span class="cm">/*其他中断处理函数与官方相同这里省略，可直接打开源码查看*/</span>

</code></pre></div>  </div>

  <p>其中SystemInit()函数是在C语言文件system_MCIMX6Y2.c中进行实现的。用于初始化GIC控制器<code class="highlighter-rouge">GIC_Init()</code>;，设置中断向量表的偏移<code class="highlighter-rouge"> __set_VBAR((uint32_t)__VECTOR_TABLE);</code>， 设置系统控制寄存器SCTLR:使能I，D cache，mmu等<code class="highlighter-rouge">__set_SCTLR(sctlr);</code> 。</p>

  <div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">void</span> <span class="nf">SystemInit</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
  <span class="kt">uint32_t</span> <span class="n">sctlr</span><span class="p">;</span>
  <span class="kt">uint32_t</span> <span class="n">actlr</span><span class="p">;</span>
 <span class="cp">#if ((__FPU_PRESENT == 1) &amp;&amp; (__FPU_USED == 1))
</span>  <span class="kt">uint32_t</span> <span class="n">cpacr</span><span class="p">;</span>
  <span class="kt">uint32_t</span> <span class="n">fpexc</span><span class="p">;</span>
 <span class="cp">#endif
</span>
  <span class="n">L1C_InvalidateInstructionCacheAll</span><span class="p">();</span>
  <span class="n">L1C_InvalidateDataCacheAll</span><span class="p">();</span>

  <span class="n">actlr</span> <span class="o">=</span> <span class="n">__get_ACTLR</span><span class="p">();</span>
  <span class="n">actlr</span> <span class="o">=</span> <span class="p">(</span><span class="n">actlr</span> <span class="o">|</span> <span class="n">ACTLR_SMP_Msk</span><span class="p">);</span> <span class="cm">/* Change to SMP mode before enable DCache */</span>
  <span class="n">__set_ACTLR</span><span class="p">(</span><span class="n">actlr</span><span class="p">);</span>

  <span class="n">sctlr</span> <span class="o">=</span> <span class="n">__get_SCTLR</span><span class="p">();</span>
  <span class="n">sctlr</span> <span class="o">=</span> <span class="p">(</span><span class="n">sctlr</span> <span class="o">&amp;</span> <span class="o">~</span><span class="p">(</span><span class="n">SCTLR_V_Msk</span> <span class="o">|</span> <span class="cm">/* Use low vector */</span>
                     <span class="n">SCTLR_A_Msk</span> <span class="o">|</span> <span class="cm">/* Disable alignment fault checking */</span>
                     <span class="n">SCTLR_M_Msk</span><span class="p">))</span> <span class="cm">/* Disable MMU */</span>
          <span class="o">|</span> <span class="p">(</span><span class="n">SCTLR_I_Msk</span> <span class="o">|</span>         <span class="cm">/* Enable ICache */</span>
             <span class="n">SCTLR_Z_Msk</span> <span class="o">|</span>         <span class="cm">/* Enable Prediction */</span>
             <span class="n">SCTLR_CP15BEN_Msk</span> <span class="o">|</span>   <span class="cm">/* Enable CP15 barrier operations */</span>
             <span class="n">SCTLR_C_Msk</span><span class="p">);</span>         <span class="cm">/* Enable DCache */</span>
  <span class="n">__set_SCTLR</span><span class="p">(</span><span class="n">sctlr</span><span class="p">);</span>

  <span class="cm">/* Set vector base address */</span>
  <span class="n">GIC_Init</span><span class="p">();</span>
  <span class="n">__set_VBAR</span><span class="p">((</span><span class="kt">uint32_t</span><span class="p">)</span><span class="n">__VECTOR_TABLE</span><span class="p">);</span>

  <span class="c1">// rgb_led_init();</span>
  <span class="c1">// blue_led_on;</span>
 <span class="cp">#if ((__FPU_PRESENT == 1) &amp;&amp; (__FPU_USED == 1))
</span>  <span class="n">cpacr</span> <span class="o">=</span> <span class="n">__get_CPACR</span><span class="p">();</span>
  <span class="cm">/* Enable NEON and FPU */</span>
  <span class="n">cpacr</span> <span class="o">=</span> <span class="p">(</span><span class="n">cpacr</span> <span class="o">&amp;</span> <span class="o">~</span><span class="p">(</span><span class="n">CPACR_ASEDIS_Msk</span> <span class="o">|</span> <span class="n">CPACR_D32DIS_Msk</span><span class="p">))</span> <span class="o">|</span> <span class="p">(</span><span class="mi">3UL</span> <span class="o">&lt;&lt;</span> <span class="n">CPACR_cp10_Pos</span><span class="p">)</span> <span class="o">|</span> <span class="p">(</span><span class="mi">3UL</span> <span class="o">&lt;&lt;</span> <span class="n">CPACR_cp11_Pos</span><span class="p">);</span>
  <span class="n">__set_CPACR</span><span class="p">(</span><span class="n">cpacr</span><span class="p">);</span>

  <span class="n">fpexc</span> <span class="o">=</span> <span class="n">__get_FPEXC</span><span class="p">();</span>
  <span class="n">fpexc</span> <span class="o">|=</span> <span class="mh">0x40000000UL</span><span class="p">;</span> <span class="cm">/* Enable NEON and FPU */</span>
  <span class="n">__set_FPEXC</span><span class="p">(</span><span class="n">fpexc</span><span class="p">);</span>
 <span class="cp">#endif </span><span class="cm">/* ((__FPU_PRESENT == 1) &amp;&amp; (__FPU_USED == 1)) */</span><span class="cp">
</span><span class="p">}</span>

</code></pre></div>  </div>
  <h3 id="main">2. main主函数初始化</h3>

  <p>主函数调用<code class="highlighter-rouge">interrupt_button2_init(void)</code>初始化</p>
  <h4 id="section-1">2.1 函数初始化中断引角</h4>

  <div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">void</span> <span class="nf">interrupt_button2_init</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">volatile</span> <span class="kt">uint32_t</span> <span class="o">*</span><span class="n">icr</span><span class="p">;</span>  <span class="c1">//用于保存 GPIO-ICR寄存器的地址,与 icrShift 变量配合使用</span>
    <span class="kt">uint32_t</span> <span class="n">icrShift</span><span class="p">;</span>       <span class="c1">//引脚号大于16时会用到,</span>

    <span class="n">icrShift</span> <span class="o">=</span> <span class="n">button2_GPIO_PIN</span><span class="p">;</span>  <span class="c1">//保存button2引脚对应的 GPIO 号</span>

    <span class="cm">/*添加中断服务函数到  "中断向量表"*/</span>
    <span class="n">SystemInstallIrqHandler</span><span class="p">(</span><span class="n">GPIO5_Combined_0_15_IRQn</span><span class="p">,</span> <span class="p">(</span><span class="n">system_irq_handler_t</span><span class="p">)</span><span class="n">EXAMPLE_GPIO_IRQHandler</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
    <span class="n">GIC_EnableIRQ</span><span class="p">(</span><span class="n">GPIO5_Combined_0_15_IRQn</span><span class="p">);</span>                 <span class="c1">//开启中断</span>


    <span class="n">CCM_CCGR1_CG15</span><span class="p">(</span><span class="mh">0x3</span><span class="p">);</span>  <span class="c1">//开启GPIO5的时钟</span>

    <span class="cm">/*设置 按键引脚的PAD属性*/</span>
    <span class="n">IOMUXC_SetPinMux</span><span class="p">(</span><span class="n">IOMUXC_SNVS_SNVS_TAMPER1_GPIO5_IO01</span><span class="p">,</span><span class="mi">0</span><span class="p">);</span>     
    <span class="n">IOMUXC_SetPinConfig</span><span class="p">(</span><span class="n">IOMUXC_SNVS_SNVS_TAMPER1_GPIO5_IO01</span><span class="p">,</span> <span class="n">button_PAD_CONFIG_DATA</span><span class="p">);</span> 
    
    <span class="cm">/*设置GPIO方向（输入或输出）*/</span>
    <span class="n">GPIO5</span><span class="o">-&gt;</span><span class="n">IMR</span> <span class="o">&amp;=</span> <span class="o">~</span><span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="n">button2_GPIO_PIN</span><span class="p">);</span>  <span class="c1">//寄存器重置为默认值</span>
    <span class="n">GPIO5</span><span class="o">-&gt;</span><span class="n">GDIR</span> <span class="o">&amp;=</span> <span class="o">~</span><span class="p">(</span><span class="mi">1</span><span class="o">&lt;&lt;</span><span class="mi">1</span><span class="p">);</span>                  <span class="c1">//设置GPIO5_01为输入模式</span>

    <span class="cm">/*设置GPIO引脚中断类型*/</span>
    <span class="n">GPIO5</span><span class="o">-&gt;</span><span class="n">EDGE_SEL</span> <span class="o">&amp;=</span> <span class="o">~</span><span class="p">(</span><span class="mi">1U</span> <span class="o">&lt;&lt;</span> <span class="n">button2_GPIO_PIN</span><span class="p">);</span><span class="c1">//寄存器重置为默认值</span>

    <span class="k">if</span><span class="p">(</span><span class="n">button2_GPIO_PIN</span> <span class="o">&lt;</span> <span class="mi">16</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">icr</span> <span class="o">=</span> <span class="o">&amp;</span><span class="p">(</span><span class="n">GPIO5</span><span class="o">-&gt;</span><span class="n">ICR1</span><span class="p">);</span>       <span class="c1">// interrupt configuration register1 save all interrupt trigger mode//</span>
    <span class="p">}</span>
    <span class="k">else</span>
    <span class="p">{</span>
        <span class="n">icr</span> <span class="o">=</span> <span class="o">&amp;</span><span class="p">(</span><span class="n">GPIO5</span><span class="o">-&gt;</span><span class="n">ICR2</span><span class="p">);</span>
        <span class="n">icrShift</span> <span class="o">-=</span> <span class="mi">16</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="cm">/*按键引脚默认低电平，设置为上升沿触发中断*/</span>
     <span class="o">*</span><span class="n">icr</span> <span class="o">=</span> <span class="p">(</span><span class="o">*</span><span class="n">icr</span> <span class="o">&amp;</span> <span class="p">(</span><span class="o">~</span><span class="p">(</span><span class="mi">3U</span> <span class="o">&lt;&lt;</span> <span class="p">(</span><span class="mi">2</span> <span class="o">*</span> <span class="n">icrShift</span><span class="p">))))</span> <span class="o">|</span> <span class="p">(</span><span class="mi">2U</span> <span class="o">&lt;&lt;</span> <span class="p">(</span><span class="mi">2</span> <span class="o">*</span> <span class="n">icrShift</span><span class="p">));</span>

     <span class="n">button2_GPIO</span><span class="o">-&gt;</span><span class="n">IMR</span> <span class="o">|=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="n">button2_GPIO_PIN</span><span class="p">);</span>    <span class="c1">// IMR--interrupt mask register 1 for enable interrupt/</span>
<span class="p">}</span>
</code></pre></div>  </div>

  <p>其中有几个寄存器需要配置，GPIO_IMR 和GPIO_ICR。</p>
  <ul>
    <li>
      <p>GPIO_IMR(interrupt mask register )<br />
Bit IMR[n] (n=0…31) controls interrupt n as follows:<br />
0 — MASKED — Interrupt n is disabled.<br />
1 — UNMASKED — Interrupt n is enabled.</p>
    </li>
    <li>
      <p>GPIO interrupt configuration register<br />
00 — LOW_LEVEL — Interrupt n is low-level sensitive.<br />
01 — HIGH_LEVEL — Interrupt n is high-level sensitive.<br />
10 — RISING_EDGE — Interrupt n is rising-edge sensitive.<br />
11 — FALLING_EDGE — Interrupt n is falling-edge sensitive.</p>
    </li>
    <li>
      <p>GPIO_EDGE_SEL edge select register
 1 — enable 使能则ICR寄存器无用，上升下降均可使能
 0 — disable 通过ICR寄存器使能</p>
    </li>
  </ul>

  <h4 id="irq">2.2 向irq中断表中注册中断函数</h4>

  <p>在2.1中使用了中断注册函数 <code class="highlighter-rouge">SystemInstallIrqHandler(GPIO5_Combined_0_15_IRQn, (system_irq_handler_t)EXAMPLE_GPIO_IRQHandler, NULL);</code>向irq_table中注册了中断号为<code class="highlighter-rouge">GPIO5_Combined_0_15_IRQn</code>的中断处理函数<code class="highlighter-rouge">EXAMPLE_GPIO_IRQHandler</code>。</p>

  <p>下面展示了中断注册函数的实现，这里用到了一个全局定义的irqTabe, IRQn_Type是定义在NXP官方库中的enum枚举类型</p>

  <div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">void</span> <span class="nf">SystemInstallIrqHandler</span><span class="p">(</span><span class="n">IRQn_Type</span> <span class="n">irq</span><span class="p">,</span> <span class="n">system_irq_handler_t</span> <span class="n">handler</span><span class="p">,</span> <span class="kt">void</span> <span class="o">*</span><span class="n">userParam</span><span class="p">)</span>
<span class="p">{</span>
  <span class="n">irqTable</span><span class="p">[</span><span class="n">irq</span><span class="p">].</span><span class="n">irqHandler</span> <span class="o">=</span> <span class="n">handler</span><span class="p">;</span>
  <span class="n">irqTable</span><span class="p">[</span><span class="n">irq</span><span class="p">].</span><span class="n">userParam</span> <span class="o">=</span> <span class="n">userParam</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>  </div>

  <div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">typedef</span> <span class="k">struct</span> <span class="n">_sys_irq_handle</span>
<span class="p">{</span>
    <span class="n">system_irq_handler_t</span> <span class="n">irqHandler</span><span class="p">;</span> <span class="cm">/**&lt; IRQ handler for specific IRQ */</span>
    <span class="kt">void</span> <span class="o">*</span><span class="n">userParam</span><span class="p">;</span>                 <span class="cm">/**&lt; User param for handler callback */</span>
<span class="p">}</span> <span class="n">sys_irq_handle_t</span><span class="p">;</span>

<span class="k">static</span> <span class="n">sys_irq_handle_t</span> <span class="n">irqTable</span><span class="p">[</span><span class="n">NUMBER_OF_INT_VECTORS</span><span class="p">];</span>

</code></pre></div>  </div>

  <p>其中<code class="highlighter-rouge">system_irq_handler_t</code> 是一个typedef修饰的函数指针变量</p>
  <div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">typedef</span> <span class="nf">void</span> <span class="p">(</span><span class="o">*</span><span class="n">system_irq_handler_t</span><span class="p">)</span> <span class="p">(</span><span class="kt">uint32_t</span> <span class="n">giccIar</span><span class="p">,</span> <span class="kt">void</span> <span class="o">*</span><span class="n">param</span><span class="p">);</span>
</code></pre></div>  </div>

  <div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">void</span> <span class="nf">EXAMPLE_GPIO_IRQHandler</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
    <span class="cm">/*按键引脚中断服务函数*/</span>
    <span class="n">button2_GPIO</span><span class="o">-&gt;</span><span class="n">ISR</span> <span class="o">=</span> <span class="mi">1U</span> <span class="o">&lt;&lt;</span> <span class="n">button2_GPIO_PIN</span><span class="p">;</span>  <span class="c1">//清除GIIP中断标志位</span>
    <span class="k">if</span><span class="p">(</span><span class="n">button_status</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">button_status</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">else</span>
    <span class="p">{</span>
        <span class="n">button_status</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>

</code></pre></div>  </div>

  <h3 id="irq-1">3.1 汇编定义irq中断</h3>

  <figure class="highlight">
    <pre><code class="language-c" data-lang="c"><table class="rouge-table"><tbody><tr><td class="gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
</pre></td><td class="code"><pre><span class="nl">IRQ_Handler:</span>
    <span class="n">push</span>    <span class="p">{</span><span class="n">lr</span><span class="p">}</span>                         <span class="cm">/* Save return address+4                                */</span>
    <span class="n">push</span>    <span class="p">{</span><span class="n">r0</span><span class="o">-</span><span class="n">r3</span><span class="p">,</span> <span class="n">r12</span><span class="p">}</span>                 <span class="cm">/* Push caller save registers                           */</span>

    <span class="n">MRS</span>     <span class="n">r0</span><span class="p">,</span> <span class="n">spsr</span>                     <span class="cm">/* Save SPRS to allow interrupt reentry                 */</span>
    <span class="n">push</span>    <span class="p">{</span><span class="n">r0</span><span class="p">}</span>

    <span class="n">MRC</span>     <span class="n">P15</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="n">r1</span><span class="p">,</span> <span class="n">C15</span><span class="p">,</span> <span class="n">C0</span><span class="p">,</span> <span class="mi">0</span>       <span class="cm">/* Page 180 Get GIC base address C15 arm maunal */</span>
    <span class="n">ADD</span>     <span class="n">r1</span><span class="p">,</span> <span class="n">r1</span><span class="p">,</span> <span class="err">#</span><span class="mh">0x2000</span>              <span class="cm">/* r1: GICC base address CPU_interface */</span>
    <span class="n">LDR</span>     <span class="n">r0</span><span class="p">,</span> <span class="p">[</span><span class="n">r1</span><span class="p">,</span> <span class="err">#</span><span class="mh">0xC</span><span class="p">]</span>               <span class="cm">/* Cpu interface add 0xC register GIC_IAR  */</span>
    <span class="cm">/** IAr iar interrupt acknowloge register HAVE interrupt id from bit 0-9  */</span> 
    <span class="n">push</span>    <span class="p">{</span><span class="n">r0</span><span class="p">,</span> <span class="n">r1</span><span class="p">}</span>

    <span class="n">CPS</span>     <span class="err">#</span><span class="mh">0x13</span>                        <span class="cm">/* Change to Supervisor mode to allow interrupt reentry */</span>

    <span class="n">push</span>    <span class="p">{</span><span class="n">lr</span><span class="p">}</span>                         <span class="cm">/* Save Supervisor lr  */</span>
    <span class="n">ldr</span>     <span class="n">r2</span><span class="p">,</span> <span class="o">=</span><span class="n">SystemIrqHandler</span>       <span class="cm">/*  r0 passes the variable value to systemirq function  */</span>
    <span class="n">blx</span>     <span class="n">r2</span>
                           
    <span class="n">POP</span>     <span class="p">{</span><span class="n">lr</span><span class="p">}</span>

    <span class="n">CPS</span>     <span class="err">#</span><span class="mh">0x12</span>                        <span class="cm">/* Back to IRQ mode                                     */</span>

    <span class="n">POP</span>     <span class="p">{</span><span class="n">r0</span><span class="p">,</span> <span class="n">r1</span><span class="p">}</span>

    <span class="n">STR</span>     <span class="n">r0</span><span class="p">,</span> <span class="p">[</span><span class="n">r1</span><span class="p">,</span> <span class="err">#</span><span class="mh">0x10</span><span class="p">]</span>              <span class="cm">/* write interupt num to EOIR responding with IAR            */</span>

    <span class="n">POP</span>     <span class="p">{</span><span class="n">r0</span><span class="p">}</span>
    <span class="n">MSR</span>     <span class="n">spsr_cxsf</span><span class="p">,</span> <span class="n">r0</span>

    <span class="n">POP</span>     <span class="p">{</span><span class="n">r0</span><span class="o">-</span><span class="n">r3</span><span class="p">,</span> <span class="n">r12</span><span class="p">}</span>
    <span class="n">POP</span>     <span class="p">{</span><span class="n">lr</span><span class="p">}</span>
    <span class="n">SUBS</span>    <span class="n">pc</span><span class="p">,</span> <span class="n">lr</span><span class="p">,</span> <span class="err">#</span><span class="mi">4</span>                  <span class="cm">/* set pc to lr-4  */</span>
</pre></td></tr></tbody></table></code></pre>
  </figure>

  <p>其中 <code class="highlighter-rouge">ldr     r2, =SystemIrqHandler</code> , <code class="highlighter-rouge">blx    r2</code> 执行到systemirqhandler函数的跳转。 并且这个c函数可以将R0(当前保存为GICC_IAR)的值传参。</p>

  <p>具体的SystemIrqHandler 函数在 system_MCIMX6Y2.c文件中如下:</p>

  <figure class="highlight">
    <pre><code class="language-c" data-lang="c"><table class="rouge-table"><tbody><tr><td class="gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
</pre></td><td class="code"><pre><span class="n">__attribute__</span><span class="p">((</span><span class="n">weak</span><span class="p">))</span> <span class="kt">void</span> <span class="nf">SystemIrqHandler</span><span class="p">(</span><span class="kt">uint32_t</span> <span class="n">giccIar</span><span class="p">)</span>
<span class="p">{</span>

<span class="cm">/***********************第二部分********************/</span>
  <span class="kt">uint32_t</span> <span class="n">intNum</span> <span class="o">=</span> <span class="n">giccIar</span> <span class="o">&amp;</span> <span class="mh">0x3FFUL</span><span class="p">;</span>     <span class="c1">// last 10 bits indicate interrupt numbers</span>

  <span class="c1">// rgb_led_init();</span>
  <span class="c1">// blue_led_on;</span>
<span class="cm">/***********************第三部分********************/</span>
  <span class="cm">/* Spurious interrupt ID or Wrong interrupt number */</span>
  <span class="k">if</span> <span class="p">((</span><span class="n">intNum</span> <span class="o">==</span> <span class="mi">1023</span><span class="p">)</span> <span class="o">||</span> <span class="p">(</span><span class="n">intNum</span> <span class="o">&gt;=</span> <span class="n">NUMBER_OF_INT_VECTORS</span><span class="p">))</span>
  <span class="p">{</span>
    <span class="k">return</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="n">irqNesting</span><span class="o">++</span><span class="p">;</span>

  <span class="c1">// __enable_irq();      /* Support nesting interrupt */</span>

<span class="cm">/***********************第四部分********************/</span>
  <span class="cm">/* Now call the real irq handler for intNum */</span>
  <span class="n">irqTable</span><span class="p">[</span><span class="n">intNum</span><span class="p">].</span><span class="n">irqHandler</span><span class="p">(</span><span class="n">giccIar</span><span class="p">,</span> <span class="n">irqTable</span><span class="p">[</span><span class="n">intNum</span><span class="p">].</span><span class="n">userParam</span><span class="p">);</span>

  <span class="c1">// __disable_irq();</span>
  <span class="n">irqNesting</span><span class="o">--</span><span class="p">;</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
  </figure>

  <p>注意第22行中有<code class="highlighter-rouge">irqTable[intNum].irqHandler(giccIar, irqTable[intNum].userParam);</code> 此语句根据中断id(intNum)调用着一个该中断所对应的中断函数，这个中断函数的首地址写在irqTable中。</p>

  <h3 id="section-2">附录</h3>

  <h4 id="attributeweak"><strong>attribute</strong>((weak))</h4>

  <p>在本文件中定义：</p>

  <p>int  <strong>attribute</strong>((weak))  func(……)
{
return 0;
}</p>

  <p>将本模块的func转成弱符号类型，如果遇到强符号类型（即外部模块定义了func），那么我们在本模块执行的func将会是外部模块定义的func。类似于c++中的重载</p>

  <p>如果外部模块没有定义，那么，将会调用这个弱符号，也就是在本地定义的func</p>

  <h4 id="typedef-">typedef 函数指针</h4>

  <p>下面代码定义了一个指针变量 pFun， pFun = glFun将函数glFun的地址指向pFun。</p>
  <div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">char</span> <span class="p">(</span><span class="o">*</span><span class="n">pFun</span><span class="p">)(</span><span class="kt">int</span><span class="p">);</span>   
<span class="kt">char</span> <span class="nf">glFun</span><span class="p">(</span><span class="kt">int</span> <span class="n">a</span><span class="p">){</span> <span class="k">return</span><span class="p">;}</span>   
<span class="kt">void</span> <span class="nf">main</span><span class="p">()</span>   
<span class="p">{</span>   
    <span class="n">pFun</span> <span class="o">=</span> <span class="n">glFun</span><span class="p">;</span>   
    <span class="p">(</span><span class="o">*</span><span class="n">pFun</span><span class="p">)(</span><span class="mi">2</span><span class="p">);</span>   
<span class="p">}</span>  

</code></pre></div>  </div>

  <div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">typedef</span> <span class="nf">char</span> <span class="p">(</span><span class="o">*</span><span class="n">PTRFUN</span><span class="p">)(</span><span class="kt">int</span><span class="p">);</span>   
<span class="n">PTRFUN</span> <span class="n">pFun</span><span class="p">;</span>   
<span class="kt">char</span> <span class="nf">glFun</span><span class="p">(</span><span class="kt">int</span> <span class="n">a</span><span class="p">){</span> <span class="k">return</span><span class="p">;}</span>   
<span class="kt">void</span> <span class="nf">main</span><span class="p">()</span>   
<span class="p">{</span>   
    <span class="n">pFun</span> <span class="o">=</span> <span class="n">glFun</span><span class="p">;</span>   
    <span class="p">(</span><span class="o">*</span><span class="n">pFun</span><span class="p">)(</span><span class="mi">2</span><span class="p">);</span>   
<span class="p">}</span>   

</code></pre></div>  </div>

</div>


									<br/>
									<h3><i class="fas fa-tags"></i>Post Tags</h3>
									
									<a href=" ../../../../tag/arm/index.html" >ARM</a>
									
									<a href=" ../../../../tag/interrupt/index.html" >interrupt</a>
									
									<a href=" ../../../../tag/bare-metal/index.html" >bare-metal</a>
									
									<head>
<script src='https://unpkg.com/valine/dist/Valine.min.js'></script>
</head>

<div id="vcomments"></div>
<script>
    new Valine({
        el: '#vcomments',
        appId: '9CvJWlMvXQsUUkjcCF0nbtSS-MdYXbMMI',
        appKey: 'KQFufTHJeHucASskKMC6xtLG',
        avatar: 'retro',
        meta: ['nick', 'mail'],
        lang: 'en',
        visitor: true,
        enableQQ:true,
        placeholder: 'Message here.\n (Tips: To make a anonymous comment, nickname and email are not necessary.\n Please entry nickname and email, if you want to show your nickname and get reminder of reply by email. )\n(输入nickname和email，可显示网络名并得到邮件回复提醒。)'
    })
</script>

								</section>
								
								

								

							</div>
						</div>
								

								
								
								

				<!-- Sidebar -->



					<div id="sidebar">
						<div class="inner">

							<!-- Search -->
								<section id="search" class="alt">
									<form method="post" action="#">
										<input type="text" name="query" id="query" placeholder="Search" />
									</form>
								</section>





							<!-- Menu -->
								<nav id="menu">
									<header class="major">
										<h2>Menu</h2>
									</header>
									<ul>
									<li><a href="../../../../index.html">About me</a></li>
									<li>


											<span class="opener">Photograph</span>
											<ul>
												

												<li><a href="../../../../photos/toronto/index.html">toronto</a></li>
												

												<li><a href="../../../../photos/windsor/index.html">windsor</a></li>
												
											</ul>
									</li>	
									</ul>
									<br/>
										
									<header class="major">
									<h2>Tech Blogs</h2>
									</header>	
									<ul>
										
										
										
										
										
										
										
										
										
										
										
										
										
										
										
										
										
										
										
										
										
										
										
										
										
										
										
										<li>
											<a href="/2020/05/12/robotics.html">Robotics</a><span class="opener" style="font-size: 0.1;"></span>
											<ul>
												
												
												

												
												
												

												
												
												

												
												
												

												
												
												

												
												
												

												
												
												

												
												
												

												
												
												

												
												
												

												
												
												

												
												
												

												
												
												

												
												
												

												
												
												

												
												
												

												
												
												

												
												
												

												
												
												

												
												
												

												
												
												

																						
												
												

												<li><a href="/2019/12/12/formation-control.html">Formation Control</a></li>
												
												
												
												
												

												
												
												

												
												
												

												
												
												

												
												
												

												
												
												

												
												
												

												
												
												<!--<li><a href="#">Feugiat Veroeros</a></li> -->
											</ul>
										</li>
										
										
										
										
										
										<li>
											<a href="/2020/05/12/programming.html">Programming</a><span class="opener" style="font-size: 0.1;"></span>
											<ul>
												
												
												

												
												
												

												
												
												

												
												
												

												
												
												

												
												
												

												
												
												

												
												
												

												
												
												

												
												
												

												
												
												

												
												
												

												
												
												

												
												
												

												
												
												

												
												
												

												
												
												

												
												
												

												
												
												

												
												
												

												
												
												

												
												
												

																						
												
												

												<li><a href="/2019/12/12/TCPlinux.html"> Socket(TCP/UDP) use note in linux</a></li>
												
												
												
												
												

																						
												
												

												<li><a href="/2019/12/12/SQL.html"> SQL command and usage </a></li>
												
												
												
												
												

																						
												
												

												<li><a href="/2019/12/12/makefile.html"> Makefile</a></li>
												
												
												
												
												

																						
												
												
												
												
												
												

												
												
												

												
												
												

												
												
												<!--<li><a href="#">Feugiat Veroeros</a></li> -->
											</ul>
										</li>
										
										
										
										
										
										<li>
											<a href="/2020/05/12/mcu.html">Mcu&Mpu</a><span class="opener" style="font-size: 0.1;"></span>
											<ul>
												
												
												

												
												
												

												
												
												

																						
												
												

												<li><a href="/2020/07/04/driver-framework.html">Linux -- Driver framework</a></li>
												
												
												
												
												

												
												
												

												
												
												

												
												
												

																						
												
												

												<li><a href="/2020/06/12/Uboot.html">Uboot porting with NXP MX serie</a></li>
												
												
												
												
												

																						
												
												

												<li><a href="/2020/06/12/FreeRTOS.html">Framework of FreeRTOS</a></li>
												
												
												
												
												

																						
												
												

												<li><a href="/2020/05/25/kernel-dts.html">Linux DTB -- device tree</a></li>
												
												
												
												
												

																						
												
												

												<li><a href="/2020/05/25/kernel.html">Linux kernel module beginning (I)</a></li>
												
												
												
												
												

																						
												
												

												<li><a href="/2020/05/25/embedded_linux.html">Embedded linux system architecture</a></li>
												
												
												
												
												

																						
												
												

												<li><a href="/2020/05/22/interrupt.html">Interrupt of ARM A7</a></li>
												
												
												
												
												

												
												
												

												
												
												

												
												
												

												
												
												

												
												
												

												
												
												

												
												
												

												
												
												

												
												
												

												
												
												

												
												
												

												
												
												

												
												
												

												
												
												

												
												
												

												
												
												<!--<li><a href="#">Feugiat Veroeros</a></li> -->
											</ul>
										</li>
										
										
										
										
										
										<li>
											<a href="/2020/05/12/Machine-Vision.html">Machine Vision</a><span class="opener" style="font-size: 0.1;"></span>
											<ul>
												
												
												

												
												
												

												
												
												

												
												
												

												
												
												

												
												
												

												
												
												

												
												
												

												
												
												

												
												
												

												
												
												

												
												
												

												
												
												

												
												
												

												
												
												

												
												
												

												
												
												

												
												
												

												
												
												

												
												
												

																						
												
												

												<li><a href="/2019/12/12/QRcode.html">Usage of QR code in ROS</a></li>
												
												
												
												
												

												
												
												

												
												
												

												
												
												

												
												
												

												
												
												

												
												
												

												
												
												

												
												
												<!--<li><a href="#">Feugiat Veroeros</a></li> -->
											</ul>
										</li>
										
										
										
										
										
										<li>
											<a href="/2020/05/12/C-C++.html">C/C++</a><span class="opener" style="font-size: 0.1;"></span>
											<ul>
												
												
												

																						
												
												

												<li><a href="/2023/04/29/IKM-test-summury.html">IKM C/C++ Test Summury</a></li>
												
												
												
												
												

																						
												
												

												<li><a href="/2020/08/06/c_cpp.html"> C++ Misc</a></li>
												
												
												
												
												

												
												
												

												
												
												

												
												
												

												
												
												

												
												
												

												
												
												

												
												
												

												
												
												

												
												
												

												
												
												

												
												
												

												
												
												

												
												
												

												
												
												

												
												
												

												
												
												

												
												
												

												
												
												

												
												
												

												
												
												

												
												
												

												
												
												

												
												
												

																						
												
												

												<li><a href="/2019/12/12/c_cpp_STL.html"> C++ STL container</a></li>
												
												
												
												
												

												
												
												

												
												
												<!--<li><a href="#">Feugiat Veroeros</a></li> -->
											</ul>
										</li>
										
										
										
										
										
										
										
										
										
										
										
										
										
										
										
										
										
										
										
										
										
										
										
												
												

												
												
												

												
												
												

												
												
												

																						
												
												
												
												

																						
												
												
												
												

												
												
												

												
												
												

												
												
												

												
												
												

												
												
												

												
												
												

												
												
												

												
												
												

												
												
												

												
												
												

												
												
												

												
												
												

																						
												
												
												
												

																						
												
												
												
												

												
												
												

												
												
												

												
												
												

												
												
												

												
												
												

												
												
												

												
												
												

												
												
												

												
												
												<!--<li><a href="#">Feugiat Veroeros</a></li> -->
											</ul>
										</li>
										
										
										
										
										
										<br/>
										<!--<li><a href="elements.html">Elements</a></li>-->
										<!--<li><a href="elements.html">Elements</a></li>-->
										
										
									</ul>

									<div>
										<h3><a href=" "><i class="fas fa-tags"></i>Tags</h3></a>
									</div>
									
									
									
									
									

									
									  
									  
									  
									  
									  

									  
									  <a href=" ../../../../tag/c/c++/index.html" style="font-size: 13.5pt; color: #444;">C/C++</a>
									  
									
									  
									  
									  
									  
									  

									  
									  <a href=" ../../../../tag/中文/index.html" style="font-size: 13.5pt; color: #444;">中文</a>
									  
									
									  
									  
									  
									  
									  

									  
									  <a href=" ../../../../tag/makefile/index.html" style="font-size: 9pt; color: #999;">Makefile</a>
									  
									
									  
									  
									  
									  
									  

									  
									  <a href=" ../../../../tag/sql/index.html" style="font-size: 9pt; color: #999;">SQL</a>
									  
									
									  
									  
									  
									  
									  

									  
									  <a href=" ../../../../tag/c/index.html" style="font-size: 9pt; color: #999;">C</a>
									  
									
									  
									  
									  
									  
									  

									  
									  <a href=" ../../../../tag/tcp/index.html" style="font-size: 9pt; color: #999;">TCP</a>
									  
									
									  
									  
									  
									  
									  

									  
									  <a href=" ../../../../tag/ros/index.html" style="font-size: 11.5pt; color: #777;">ROS</a>
									  
									
									  
									  
									  
									  
									  

									  
									  <a href=" ../../../../tag/robotics/index.html" style="font-size: 9pt; color: #999;">Robotics</a>
									  
									
									  
									  
									  
									  
									  

									  
									  <a href=" ../../../../tag/localization/index.html" style="font-size: 11.5pt; color: #777;">Localization</a>
									  
									
									  
									  
									  
									  
									  

									  
									  <a href=" ../../../../tag/formation-control/index.html" style="font-size: 9pt; color: #999;">Formation-control</a>
									  
									
									  
									  
									  
									  
									  

									  
									  <a href=" ../../../../tag/qrcode/index.html" style="font-size: 9pt; color: #999;">QRcode</a>
									  
									
									  
									  
									  
									  
									  

									  
									  <a href=" ../../../../tag/camera-model/index.html" style="font-size: 9pt; color: #999;">Camera-model</a>
									  
									
									  
									  
									  
									  
									  

									  
									  <a href=" ../../../../tag/notes/index.html" style="font-size: 18pt; color: #000;">Notes</a>
									  
									
									  
									  
									  
									  
									  

									  
									  <a href=" ../../../../tag/arm/index.html" style="font-size: 9pt; color: #999;">ARM</a>
									  
									
									  
									  
									  
									  
									  

									  
									  <a href=" ../../../../tag/interrupt/index.html" style="font-size: 9pt; color: #999;">interrupt</a>
									  
									
									  
									  
									  
									  
									  

									  
									  <a href=" ../../../../tag/bare-metal/index.html" style="font-size: 9pt; color: #999;">bare-metal</a>
									  
									
									  
									  
									  
									  
									  

									  
									  <a href=" ../../../../tag/linux/index.html" style="font-size: 18pt; color: #000;">Linux</a>
									  
									
									  
									  
									  
									  
									  

									  
									  <a href=" ../../../../tag/uboot/index.html" style="font-size: 11.5pt; color: #777;">Uboot</a>
									  
									
									  
									  
									  
									  
									  

									  
									  <a href=" ../../../../tag/dirver/index.html" style="font-size: 11.5pt; color: #777;">Dirver</a>
									  
									
									  
									  
									  
									  
									  

									  
									  <a href=" ../../../../tag/kernel/index.html" style="font-size: 13.5pt; color: #444;">kernel</a>
									  
									
									  
									  
									  
									  
									  

									  
									  <a href=" ../../../../tag/device-tree/index.html" style="font-size: 11.5pt; color: #777;">Device-tree</a>
									  
									
									  
									  
									  
									  
									  

									  
									  <a href=" ../../../../tag/rtos/index.html" style="font-size: 9pt; color: #999;">RTOS</a>
									  
									
									  
									  
									  
									  
									  

									  
									  <a href=" ../../../../tag/freertos/index.html" style="font-size: 9pt; color: #999;">FreeRTOS</a>
									  
									
									

								</nav>


								<!-- 
								

								
								 
								  
								    <a href="/2020/05/22/interrupt.html">ARM</a>
								  
								  
								
								 
								  
								    <a href="/2019/12/12/TCPlinux.html">C</a>
								  
								  
								
								 
								  
								    <a href="/2023/04/29/IKM-test-summury.html">C/C++</a>
								  
								    <a href="/2020/08/06/c_cpp.html">C/C++</a>
								  
								    <a href="/2019/12/12/c_cpp_STL.html">C/C++</a>
								  
								  
								
								 
								  
								    <a href="/2019/12/12/QRcode.html">Camera-model</a>
								  
								  
								
								 
								  
								    <a href="/2020/07/04/driver-framework.html">Device-tree</a>
								  
								    <a href="/2020/05/25/kernel-dts.html">Device-tree</a>
								  
								  
								
								 
								  
								    <a href="/2020/05/25/kernel.html">Dirver</a>
								  
								    <a href="/2020/05/25/embedded_linux.html">Dirver</a>
								  
								  
								
								 
								  
								    <a href="/2019/12/12/formation-control.html">Formation-control</a>
								  
								  
								
								 
								  
								    <a href="/2020/06/12/FreeRTOS.html">FreeRTOS</a>
								  
								  
								
								 
								  
								    <a href="/2020/07/04/driver-framework.html">Linux</a>
								  
								    <a href="/2020/06/12/Uboot.html">Linux</a>
								  
								    <a href="/2020/05/25/kernel-dts.html">Linux</a>
								  
								    <a href="/2020/05/25/kernel.html">Linux</a>
								  
								    <a href="/2020/05/25/embedded_linux.html">Linux</a>
								  
								  
								
								 
								  
								    <a href="/2019/12/12/QRcode.html">Localization</a>
								  
								    <a href="/2019/12/12/formation-control.html">Localization</a>
								  
								  
								
								 
								  
								    <a href="/2019/12/12/makefile.html">Makefile</a>
								  
								  
								
								 
								  
								    <a href="/chinese/linux_command.html">Notes</a>
								  
								    <a href="/chinese/dts.html">Notes</a>
								  
								    <a href="/chinese/linux_bug.html">Notes</a>
								  
								    <a href="/2020/05/12/knowledge.html">Notes</a>
								  
								    <a href="/2020/05/12/Cricuit.html">Notes</a>
								  
								  
								
								 
								  
								    <a href="/2019/12/12/QRcode.html">QRcode</a>
								  
								  
								
								 
								  
								    <a href="/2019/12/12/QRcode.html">ROS</a>
								  
								    <a href="/2019/12/12/formation-control.html">ROS</a>
								  
								  
								
								 
								  
								    <a href="/2020/06/12/FreeRTOS.html">RTOS</a>
								  
								  
								
								 
								  
								    <a href="/2019/12/12/formation-control.html">Robotics</a>
								  
								  
								
								 
								  
								    <a href="/2019/12/12/SQL.html">SQL</a>
								  
								  
								
								 
								  
								    <a href="/2019/12/12/TCPlinux.html">TCP</a>
								  
								  
								
								 
								  
								    <a href="/2020/06/12/Uboot.html">Uboot</a>
								  
								    <a href="/2020/05/25/embedded_linux.html">Uboot</a>
								  
								  
								
								 
								  
								    <a href="/2020/05/22/interrupt.html">bare-metal</a>
								  
								  
								
								 
								  
								    <a href="/2020/05/22/interrupt.html">interrupt</a>
								  
								  
								
								 
								  
								    <a href="/2020/07/04/driver-framework.html">kernel</a>
								  
								    <a href="/2020/05/25/kernel-dts.html">kernel</a>
								  
								    <a href="/2020/05/25/kernel.html">kernel</a>
								  
								  
								
								 
								  
								    <a href="/chinese/dts.html">中文</a>
								  
								    <a href="/2020/05/12/knowledge.html">中文</a>
								  
								    <a href="/chinese/C_Cpp_STL.html">中文</a>
								  
								  
								 -->
							
							<!-- Footer -->
								<footer id="footer">
									<p class="copyright">&copy; Jietang. All rights reserved.</p>
								</footer>

						</div>
					</div>

			</div>

		<!-- Scripts -->
			<script src="../../../../assets/js/jquery.min.js"></script>
			<script src="../../../../assets/js/browser.min.js"></script>
			<script src="../../../../assets/js/breakpoints.min.js"></script>
			<script src="../../../../assets/js/util.js"></script>
			<script src="../../../../assets/js/main.js"></script>

	</body>
</html>